@using Ubik.Web.Auth.ViewModels
@model IEnumerable<RoleViewModel>
@{
    AddBackofficeBottom("UserAdministration/roles");
}

<aside class="right-side">

    <section class="content-header">
        <h1>
            @PageContent.Current.Title
            <small>@PageContent.Current.Subtitle</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Implement</a></li>
            <li><a href="#">the</a></li>
            <li class="active">breadcrump</li>
        </ol>
    </section>
 
    <section class="content">
        <div class="row">


            @*<div class="col-md-12">
                <div class="box box-primary">
                    <div class="box-header">
                        <h3 class="box-title">Quick Example</h3>
                    </div>
                </div>
            </div>*@

            <div class="col-md-6">
                <div class="box box-primary">
                    <div class="box-header">
                        <h3 class="box-title">Roles</h3>
                    </div><!-- /.box-header -->
                    <div class="box-body table-responsive">
                        <table class="table table-bordered table-hover" id="roles-table">
                            <thead>
                                <tr>
                                    <th style="width: 10px">#</th>
                                    <th>Name</th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @for (var i = 0; i < Model.Count(); i++)
                                {
                                    var role = Model.ToArray()[i];
                                    <tr>
                                        <td>@((i + 1).ToString("000"))</td>
                                        <td>@Html.ActionLink(role.Name, "Roles", "UserAdministration", new { id = role.Name, area = "Backoffice" }, null)</td>
                                        <td>
                                            @if (role.IsSytemRole)
                                            {
                                                <i class="fa fa-desktop" rel="tooltip" title="System Role"></i>
                                            }
                                            @if (role.IsPersisted)
                                            {
                                                <i class="fa fa-database" rel="tooltip" title="Persisted Role"></i>

                                            }
                                        </td>
                                        <td>
                                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#copy-role-modal" data-source="@role.Name">Copy</button>
                                            @if (role.IsPersisted)
                                            {
                                                <a href="@Url.Action("DeleteRole", "UserAdministration", new {id = @role.Name})" class="btn btn-warning">Delete</a>

                                            }
                                        </td>
                                    </tr>
                                }
                                </tbody>
</table>
                    </div><!-- /.box-body -->
                    
                </div>
            </div>
            <div class="col-md-6">

            </div>
        </div>
    </section>
</aside>
<div class="modal fade" id="copy-role-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" >Source: <span id="roleTitleName" ></span></h4>
            </div>
            <div class="modal-body">
                <!--form start-->
@using (Html.BeginForm("CopyRole", "UserAdministration", FormMethod.Post, new { role = "form", id = "copy-role-form" }))
{
    @Html.AntiForgeryToken()
    <!-- left column -->

    <div class="box-body">
     
            <div class="form-group hidden">
                <input type="hidden" id="Name" name="Name"/>
            </div>



            <div class="box-footer">
                <div class="form-group">
                    <div class="input-group">
                        <input type="text" id="Target" name="Target" class="form-control"/>
 

                        <div class="input-group-btn">
                            <button type="submit" class="btn btn-primary">Copy to new Role</button>
                        </div><!-- /btn-group -->

                    </div>

                </div>
            </div>
      
    </div>
}
                <!--form end-->

            </div>
            <div class="modal-footer clearfix">
                
           
            </div>
        </div>
    </div>
</div>